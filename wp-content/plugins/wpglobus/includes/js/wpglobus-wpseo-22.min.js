"use strict";var wpglobus_wpseo=function(){function e(e,t,a){if(void 0!==e){if("undefined"==typeof replacedVars&&0==jQuery("#title").size())return e;var s="#title",n="#excerpt-"+t,o="#content";t!=WPGlobusAdmin.data.default_language&&(s="#title_"+t,o="#content_"+t),jQuery(s).length&&(e=e.replace(/%%title%%/g,jQuery(s).val().replace(/(<([^>]+)>)/gi,""))),e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.replace(/%%sitedesc%%/g,WPGlobusAdmin.data.blogdescription[t])).replace(/%%sitename%%/g,WPGlobusAdmin.data.blogname[t])).replace(/%%sep%%/g,wpseoMetaboxL10n.sep)).replace(/%%date%%/g,wpseoMetaboxL10n.date)).replace(/%%id%%/g,wpseoMetaboxL10n.id)).replace(/%%page%%/g,wpseoMetaboxL10n.page)).replace(/%%currenttime%%/g,wpseoMetaboxL10n.currenttime)).replace(/%%currentdate%%/g,wpseoMetaboxL10n.currentdate)).replace(/%%currentday%%/g,wpseoMetaboxL10n.currentday)).replace(/%%currentmonth%%/g,wpseoMetaboxL10n.currentmonth)).replace(/%%currentyear%%/g,wpseoMetaboxL10n.currentyear)).replace(/%%focuskw%%/g,jQuery("#yoast_wpseo_focuskw_"+t).val().replace(/(<([^>]+)>)/gi,""));var l="";jQuery(n).length&&(l=ystClean(jQuery(n).val().replace(/(<([^>]+)>)/gi,"")),e=e.replace(/%%excerpt_only%%/g,l)),""===l&&jQuery(o).length&&(l=jQuery(o).val().replace(/(<([^>]+)>)/gi,"").substring(0,wpseoMetaboxL10n.wpseo_meta_desc_length-1)),e=e.replace(/%%excerpt%%/g,l),jQuery("#parent_id").length&&jQuery("#parent_id option:selected").text()!==wpseoMetaboxL10n.no_parent_text&&(e=e.replace(/%%parent_title%%/g,jQuery("#parent_id option:selected").text()));var r=ystEscapeFocusKw(wpseoMetaboxL10n.sep),u=new RegExp(r+" "+r,"g");if(-1!==(e=e.replace(u,wpseoMetaboxL10n.sep)).indexOf("%%")&&null!==e.match(/%%[a-z0-9_-]+%%/i))for(var p=/%%[a-z0-9_-]+%%/gi,i=e.match(p),c=0;c<i.length;c++)if(void 0===replacedVars[i[c]])e=e.replace(i[c],replacedVars[i[c]]);else{var d=i[c];replacedVars[d]="",ystAjaxReplaceVariables(d,a)}a(e)}}function t(e,t,a){var s,n=ystEscapeFocusKw(jQuery.trim(jQuery("#"+wpseoMetaboxL10n.field_prefix+"focuskw_"+a).val()));if(""===n)return e;s=-1!==n.search(" ")?n.split(" "):new Array(n);for(var o=0;o<s.length;o++){var l=ystClean(s[o]),r="";t?(l=l.replace(" ","-").toLowerCase(),r=new RegExp("([-/])("+l+")([-/])?")):r=new RegExp("(^|[ \\s\n\r\t\\.,'\\(\"\\+;!?:\\-]+)("+l+")($|[ \\s\n\r\t\\.,'\\)\"\\+;!?:\\-]+)","gim"),void 0!==e&&(e=e.replace(r,"$1<strong>$2</strong>$3"))}return e}function a(e){var a=jQuery.trim(ystClean(jQuery("#"+wpseoMetaboxL10n.field_prefix+"metadesc_"+e).val())),n=jQuery("<div />"),o=jQuery("#wpseosnippet_"+e);if(""===a&&""!==wpseoMetaboxL10n.wpseo_metadesc_template&&(a=wpseoMetaboxL10n.wpseo_metadesc_template),""!==a)a=ystReplaceVariables(a,function(a){a=n.text(a).html(),a=ystClean(a);var l=wpseoMetaboxL10n.wpseo_meta_desc_length-a.length;l=l<0?'<span class="wrong">'+l+"</span>":'<span class="good">'+l+"</span>",jQuery("#"+wpseoMetaboxL10n.field_prefix+"metadesc-length_"+e).html(l),a=t(a=ystSanitizeDesc(a),!1),o.find(".desc span.autogen").html(""),o.find(".desc span.content").html(a),s(e)});else{jQuery("#"+wpseoMetaboxL10n.field_prefix+"metadesc-length_"+e).html(wpseoMetaboxL10n.wpseo_meta_desc_length),o.find(".desc span.content").html(""),s(e);var l="#content";e!=WPGlobusAdmin.data.default_language&&(l="#content_"+e),"undefined"!=typeof tinyMCE&&null!==tinyMCE.get("excerpt-"+e)&&(a=tinyMCE.get("excerpt-"+e).getContent(),a=ystClean(a)),"undefined"!=typeof tinyMCE&&null!==tinyMCE.get(l)&&0===a.length&&(a=tinyMCE.get(l).getContent(),a=ystClean(a));var r=ystEscapeFocusKw(jQuery.trim(jQuery("#"+wpseoMetaboxL10n.field_prefix+"focuskw_"+e).val()));if(""!==r){var u=new RegExp(r,"gim");a=-1!==a.search(u)&&a.length>wpseoMetaboxL10n.wpseo_meta_desc_length?a.substr(a.search(u),wpseoMetaboxL10n.wpseo_meta_desc_length):a.substr(0,wpseoMetaboxL10n.wpseo_meta_desc_length)}else a=a.substr(0,wpseoMetaboxL10n.wpseo_meta_desc_length);a=t(a,!1),a=ystSanitizeDesc(a),o.find(".desc span.autogen").html(a)}}function s(e){var t=jQuery.trim(jQuery("#"+wpseoMetaboxL10n.field_prefix+"focuskw_"+e).val());t=ystEscapeFocusKw(t).toLowerCase();var a="#title",s="#content";e!=WPGlobusAdmin.data.default_language&&(a="#title_"+e,s="#content_"+e);var n,o,l=jQuery(document).triggerHandler("wpglobus_post_name_full",{postnamefull:"#editable-post-name-full",language:e})||"#editable-post-name-full";jQuery(l).length&&(n=jQuery(l).text(),o=wpseoMetaboxL10n.wpseo_permalink_template.replace("%postname%",n).replace("http://",""));var r=new RegExp("(^|[ \\s\n\r\t\\.,'\\(\"\\+;!?:\\-])"+ystRemoveLowerCaseDiacritics(t)+"($|[\\s\n\r\t.,'\\)\"\\+!?:;\\-])","gim"),u=ystRemoveLowerCaseDiacritics(t),p=new RegExp(u.replace(/\s+/g,"[-_\\//]"),"gim"),i=jQuery("#focuskwresults_"+e),c=jQuery("#wpseosnippet_"+e).find(".desc span.content").text();if(""!==t){var d="<p>"+wpseoMetaboxL10n.keyword_header+"</p>";d+="<ul>",jQuery(a).length&&(d+="<li>"+wpseoMetaboxL10n.article_header_text+ystFocusKwTest(jQuery(a).val(),r)+"</li>"),d+="<li>"+wpseoMetaboxL10n.page_title_text+ystFocusKwTest(jQuery("#wpseosnippet_title_"+e).text(),r)+"</li>",d+="<li>"+wpseoMetaboxL10n.page_url_text+ystFocusKwTest(o,p)+"</li>",jQuery(s).length&&(d+="<li>"+wpseoMetaboxL10n.content_text+ystFocusKwTest(jQuery(s).val(),r)+"</li>"),d+="<li>"+wpseoMetaboxL10n.meta_description_text+ystFocusKwTest(c,r)+"</li>",d+="</ul>",i.html(d)}else i.html("")}if("undefined"!=typeof wpseoMetaboxL10n){var n=function(t,a){var n="",o=jQuery("#"+wpseoMetaboxL10n.field_prefix+"title_"+a),l=jQuery("#"+wpseoMetaboxL10n.field_prefix+"title-length-warning_"+a),r=jQuery("<div />"),u=jQuery("#wpseosnippet_title_"+a);if(o.val()?n=o.val().replace(/(<([^>]+)>)/gi,""):(n=wpseoMetaboxL10n.wpseo_title_template,n=r.html(n).text()),""===n)return u.html(""),void l.hide();n=ystClean(n),n=jQuery.trim(n),n=r.text(n).html(),t&&o.val(n),n=e(n,a,function(e){e=ystSanitizeTitle(e),jQuery("#wpseosnippet_title_"+a).html(e);var t=r.html(e).text();o.attr("placeholder",t);var n=document.getElementById("wpseosnippet_title_"+a);null!==n&&(n.scrollWidth>n.clientWidth?l.show():l.hide()),s(a)})},o=function(e){n(!1,e),a(e)};jQuery("#wpglobus-wpseo-tabs").tabs();var l=jQuery("#wpglobus-wpseo-attr"),r=jQuery(".wpseotab.general .form-table"),u=l.data("ids"),p=l.data("names"),i="";u=u+","+l.data("qtip"),u=u.split(","),p=p.split(","),jQuery("#wpglobus-wpseo-tabs").insertBefore(r),jQuery(".wpglobus-wpseo-general").each(function(e,t){var s=jQuery(t),l=s.data("language");if(s.html('<table class="form-table wpglobus-table-'+l+'" data-language="'+l+'">'+r.html()+"</table>"),jQuery.each(p,function(e,t){jQuery("#"+t).attr("name",t+"_"+l)}),jQuery.each(u,function(e,t){var a=jQuery("#"+t);"wpseosnippet"==t&&a.addClass("wpglobus-wpseosnippet"),"focuskwresults"==t&&a.addClass("wpglobus-focuskwresults"),wpseoMetaboxL10n.field_prefix+"metadesc"==t&&a.addClass("wpglobus-wpseo_metadesc").text(s.data("metadesc")),wpseoMetaboxL10n.field_prefix+"title"==t&&a.addClass("wpglobus-wpseo_title").val(s.data("wpseotitle")),wpseoMetaboxL10n.field_prefix+"focuskw"==t&&a.addClass("wpglobus-wpseo_focuskw").val(s.data("focuskw")),a.attr("id",t+"_"+l),jQuery("#"+t+"_"+l).attr("data-language",l)}),i="complete"==s.data("permalink")?s.data("url-"+l):s.data("url-"+l)+jQuery("#editable-post-name-full").text()+"/",jQuery("#wpseosnippet_"+l+" .url").text(i),o(l),void 0!==jQuery().autocomplete){var c,d={};jQuery("#"+wpseoMetaboxL10n.field_prefix+"focuskw_"+l).autocomplete({minLength:3,formatResult:function(e){return jQuery("<div/>").html(e).html()},source:function(e,t){var a=e.term;a in d?t(d[a]):(e._ajax_nonce=wpseoMetaboxL10n.wpseo_keyword_suggest_nonce,e.action="wpseo_get_suggest",c=jQuery.getJSON(ajaxurl,e,function(e,s,n){d[a]=e,n===c&&t(e)}))}})}jQuery("#"+wpseoMetaboxL10n.field_prefix+"title_"+l).keyup(function(){n(!1,jQuery(this).data("language"))}),jQuery("#title_"+l).keyup(function(){var e=jQuery(this).data("language")?jQuery(this).data("language"):WPGlobusAdmin.data.default_language;n(!1,e),a(e)}),0==e&&jQuery("#title").keyup(function(){n(!1,WPGlobusAdmin.data.default_language),a(WPGlobusAdmin.data.default_language)}),0==e&&jQuery("body").on("change","#parent_id",function(){jQuery.each(WPGlobusAdmin.data.enabled_languages,function(e,t){n(!1,t),a(t)})}),jQuery("#"+wpseoMetaboxL10n.field_prefix+"metadesc_"+l).keyup(function(){a(jQuery(this).data("language"))}),jQuery("body").on("keyup","#excerpt-"+l,function(){a(jQuery(this).data("language")?jQuery(this).data("language"):WPGlobusAdmin.data.default_language)}),0==e&&jQuery(".wpglobus-editor").focusout(function(){a(jQuery(this).data("language"))});var g=!1;jQuery(document).on("change","#"+wpseoMetaboxL10n.field_prefix+"focuskw_"+l,function(){var e=jQuery(this).data("language"),t=jQuery("#focuskwhelp_"+e);-1!=jQuery("#"+wpseoMetaboxL10n.field_prefix+"focuskw_"+e).val().search(",")?(t.click(),g=!0):g&&(t.qtip("hide"),g=!1),o(e)})}),r.addClass("hidden"),jQuery("body").on("change",".wpglobus-wpseo_metadesc",function(e){var t="#"+wpseoMetaboxL10n.field_prefix+"metadesc",a=jQuery(this);jQuery(t).val(WPGlobusCore.getString(jQuery(t).val(),a.val(),a.data("language")))}),jQuery("body").on("change",".wpglobus-wpseo_title",function(e){var t="#"+wpseoMetaboxL10n.field_prefix+"title",a=jQuery(this);jQuery(t).val(WPGlobusCore.getString(jQuery(t).val(),a.val(),a.data("language")))}),jQuery("body").on("change",".wpglobus-wpseo_focuskw",function(e){var t="#"+wpseoMetaboxL10n.field_prefix+"focuskw",a=jQuery(this);jQuery(t).val(WPGlobusCore.getString(jQuery(t).val(),a.val(),a.data("language")))}),jQuery("body").on("click",".wpglobus-post-body-tabs-list li",function(e){jQuery(this).hasClass("wpglobus-post-tab")&&jQuery("#wpglobus-wpseo-tabs").tabs("option","active",jQuery(this).data("order"))}),function(){jQuery(".yoast_help").qtip({content:{attr:"alt"},position:{my:"bottom left",at:"top center"},style:{tip:{corner:!0},classes:"yoast-qtip qtip-rounded qtip-blue"},show:"click",hide:{fixed:!0,delay:500}})}(),ystUpdateSnippet()}};